version: '3.8'

services:
  backend:
    build:
      context: ./backend
      dockerfile: Dockerfile.dev
    command: npm run dev:debug        # Use nodemon with debug flag
    ports:
      - "9229:9229"                    # Debug port for VS Code
    volumes:
      - ./backend:/app
      - /app/node_modules             # Bind mount → live code changes
    env_file:
      - ./backend/.env.development

  frontend:
    build:
      context: ./frontend
      dockerfile: Dockerfile.dev
    command: npm run serve            # Run Vue dev server instead of Nginx
    volumes:
      - ./frontend:/app               # Bind mount → live reload
      - /app/node_modules
    env_file:
      - ./frontend/.env.development       # Base URL for proxy target (no /api path)
    networks:
      - app-network